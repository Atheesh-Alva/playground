name: Playground - Create PR Workflow Action

on:
  push:
    tags:
    - 'PR-+[0-9]+[0-9]+[0-9]'

permissions:
  contents: write
  statuses: read
  actions: read

jobs:
  build:
    name: Create PR Playground CI/CD
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Extract commit data
        uses: rlespinasse/git-commit-data-action@v1

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v6
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          commit-message: Auto-create PR Commit Message
          title: Auto-create PR Title
          body: Auto-create PR Body
          branch: DEV
          base: main  # The branch you want to create the pull request against
          delete-branch: true
          labels: Auto-create PR Label
          # assignees: peter-evans
          # reviewers: peter-evans
          # team-reviewers: 
          # milestone: 1
          # draft: false


      # - name: Create Pull Request
      #   id: cpr
      #   uses: peter-evans/create-pull-request@v6

      # - name: Check outputs
      #   if: ${{ steps.cpr.outputs.pull-request-number }}
      #   run: |
      #     echo "Pull Request Number - ${{ steps.cpr.outputs.pull-request-number }}"
      #     echo "Pull Request URL - ${{ steps.cpr.outputs.pull-request-url }}"